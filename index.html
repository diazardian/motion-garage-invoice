<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Data Entry System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Passkey/PIN Login Overlay -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-container">
            <div class="login-header">
                <h1>üîê Motion Garage Access</h1>
                <p>Masukkan PIN untuk mengakses sistem</p>
            </div>
            <div class="login-form">
                <div class="pin-input-container">
                    <input type="password" id="pinInput" class="pin-input" placeholder="Masukkan PIN" maxlength="6" autocomplete="off">
                    <button type="button" id="togglePinVisibility" class="toggle-pin-btn">üëÅÔ∏è</button>
                </div>
                <button type="button" id="loginBtn" class="login-btn">üîì Masuk</button>
                <div id="loginError" class="login-error" style="display: none;">
                    ‚ùå PIN salah. Silakan coba lagi.
                </div>
                <div class="login-hint">
                    <small>üí° Hint: PIN default adalah <strong>Tanya yg buat</strong></small>
                    <small>Anda dapat mengubah PIN di pengaturan setelah login</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Content -->
    <div id="mainApp" class="main-app" style="display: none;">
        <div class="container">
            <header>
                <h1>üìã Motion Garage Invoice Data Entry System</h1>
                <p>Input data invoice dan export ke format CSV untuk Discord</p>
            </header>

            <div style="padding: 30px 60px 0px 60px">
                <!-- <div style="width: 100%; padding: 20px; border-radius: 10px; border: 1px solid #ccc; background-color: #f9f9f9;">
                    <ul class="a">changelog 1.0.2:
                        <li>add hapus semua data yang ter-record</li>
                    </ul>
                </div> -->
                <div class="animated-announcement">
                        Harga Part Baru!!!!
                    </div>
            </div>

            <div class="form-container">
                <form id="invoiceForm">
                    <div class="section">
                        <h2>üìù Data Invoice</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nomor">Nomor:</label>
                                <input type="number" id="nomor" name="nomor" required>
                            </div>
                            <div class="form-group">
                                <label for="namaClient">Nama Client:</label>
                                <input type="text" id="namaClient" name="namaClient" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="jenisKendaraan">Jenis Kendaraan:</label>
                                <input type="text" id="jenisKendaraan" name="jenisKendaraan" required>
                            </div>
                            <div class="form-group">
                                <label for="namaMontir">Nama Montir:</label>
                                <input type="text" id="namaMontir" name="namaMontir" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pengerjaan">Pengerjaan:</label>
                                <div class="pengerjaan-container">
                                    <div class="search-container">
                                        <input type="text" id="searchPengerjaan" placeholder="üîç Cari item pengerjaan..." class="search-input">
                                        <button type="button" id="clearSearch" class="clear-search-btn">‚úñÔ∏è</button>
                                    </div>
                                    <select id="pengerjaanSelect" class="pengerjaan-select" multiple size="8">
                                        <optgroup label="SERVICES">
                                            <option value="ENGINE OIL|50" data-search="engine oil services">ENGINE OIL - $50</option>
                                            <option value="AIR FILTER|100" data-search="air filter services">AIR FILTER - $100</option>
                                            <option value="SPARK PLUG|50" data-search="spark plug services">SPARK PLUG - $50</option>
                                            <option value="CLEANING KIT|50" data-search="cleaning kit services">CLEANING KIT - $50</option>
                                            <option value="DUCT TAPE|50" data-search="duct tape services">DUCT TAPE - $50</option>
                                        </optgroup>
                                        <optgroup label="BRAKE TYPE">
                                            <option value="BRAKEPAD|350" data-search="brakepad brake type">BRAKEPAD - $350</option>
                                            <option value="SUSPENSION PART|400" data-search="suspension part brake type">SUSPENSION PART - $400</option>
                                            <option value="TYRE REPLACEMENT|350" data-search="tyre replacement brake type">TYRE REPLACEMENT - $350</option>
                                            <option value="SLICK TYRES|600" data-search="slick tyres brake type">SLICK TYRES - $600</option>
                                            <option value="SEMI SLICK TYRES|550" data-search="semi slick tyres brake type">SEMI SLICK TYRES - $550</option>
                                            <option value="OFFROAD TYRES|500" data-search="offroad tyres brake type">OFFROAD TYRES - $500</option>
                                            <option value="BULLETPROOF TYRES|6000" data-search="bulletproof tyres brake type">BULLETPROOF TYRES - $6,000</option>
                                            <option value="VEHICLE WHEELS|900" data-search="vehicle wheels brake type">VEHICLE WHEELS - $900</option>
                                            <option value="TYRE SMOKE KIT|400" data-search="tyre smoke kit brake type">TYRE SMOKE KIT - $400</option>
                                        </optgroup>
                                        <optgroup label="ENGINE DRIVETRAIN">
                                            <option value="CLUTCH REPLACEMENT|400" data-search="clutch replacement brake type">CLUTCH REPLACEMENT - $400</option>
                                            <option value="I4 ENGINE|6600" data-search="i4 engine drivetrain">I4 ENGINE - $6,600</option>
                                            <option value="V6 ENGINE|6600" data-search="v6 engine drivetrain">V6 ENGINE - $6,600</option>
                                            <option value="V8 ENGINE|12000" data-search="v8 engine drivetrain">V8 ENGINE - $12,000</option>
                                            <option value="V12 ENGINE|24000" data-search="v12 engine drivetrain">V12 ENGINE - $24,000</option>
                                            <option value="TURBOCHARGER|7500" data-search="turbocharger engine drivetrain">TURBOCHARGER - $7,500</option>
                                            <option value="MANUAL GEARBOX|5100" data-search="manual gearbox engine drivetrain">MANUAL GEARBOX - $5,100</option>
                                            <option value="AWD|5400" data-search="awd engine drivetrain">AWD - $5,400</option>
                                            <option value="RWD|4500" data-search="rwd engine drivetrain">RWD - $4,500</option>
                                            <option value="FWD|3600" data-search="fwd engine drivetrain">FWD - $3,600</option>
                                        </optgroup>
                                        <optgroup label="EV">
                                            <option value="EV MOTOR|9000" data-search="ev motor electric">EV MOTOR - $9,000</option>
                                            <option value="EV BATTERY|7500" data-search="ev battery electric">EV BATTERY - $7,500</option>
                                            <option value="EV COOLANT|200" data-search="ev coolant electric">EV COOLANT - $200</option>
                                        </optgroup>
                                        <optgroup label="PERFORMANCE">
                                            <option value="PERFORMANCE PART|1500" data-search="performance part">PERFORMANCE PART - $1,500</option>
                                            <option value="DRIFT TUNING KIT|3000" data-search="drift tuning kit performance">DRIFT TUNING KIT - $3,000</option>
                                            <option value="CERAMIC BRAKES|4500" data-search="ceramic brakes performance">CERAMIC BRAKES - $4,500</option>
                                            <option value="NITROUS BOTTLE|300" data-search="nitrous bottle performance">NITROUS BOTTLE - $300</option>
                                            <option value="EMPTY NITROUS BOTTLE|100" data-search="empty nitrous bottle performance">EMPTY NITROUS BOTTLE - $100</option>
                                            <option value="NITROUS INSTALL KIT|500" data-search="nitrous install kit performance">NITROUS INSTALL KIT - $500</option>
                                        </optgroup>
                                        <optgroup label="TOOL">
                                            <option value="MECH TABLET|300" data-search="mech tablet tool">MECH TABLET - $300</option>
                                            <option value="LIGHTING CONTROLLER|500" data-search="lighting controller tool">LIGHTING CONTROLLER - $500</option>
                                        </optgroup>
                                        <optgroup label="VISUAL MODIF">
                                            <option value="STANCING KIT|2500" data-search="stancing kit tool">STANCING KIT - $2,500</option>
                                            <option value="COSMETIC PART|300" data-search="cosmetic part visual modif">COSMETIC PART - $300</option>
                                            <option value="RESPRAY KIT|250" data-search="respray kit visual modif">RESPRAY KIT - $250</option>
                                            <option value="EXTRAS KIT|800" data-search="extras kit visual modif">EXTRAS KIT - $800</option>
                                        </optgroup>
                                    </select>
                                    <div class="pengerjaan-controls">
                                        <button type="button" id="addPengerjaan" class="add-btn">‚ûï Tambah Selected</button>
                                        <div class="quantity-control">
                                            <label for="itemQuantity">Qty:</label>
                                            <input type="number" id="itemQuantity" value="1" min="1" max="99">
                                        </div>
                                    </div>
                                </div>
                                <textarea id="pengerjaan" name="pengerjaan" rows="4" placeholder="Daftar pengerjaan akan muncul di sini..." required readonly></textarea>
                                <div class="pengerjaan-actions">
                                    <button type="button" id="clearPengerjaan" class="clear-btn">üóëÔ∏è Clear All</button>
                                    <span id="totalHarga" class="total-harga">Total: $0</span>
                                </div>
                                <div id="selectedItems" class="selected-items"></div>
                            </div>
                            <div class="form-group">
                                <label for="modal">Modal:</label>
                                <input type="number" id="modal" name="modal" step="0.01" value="0" required>
                            </div>
                            <div class="form-group">
                                <label for="billScreenshot">üì∏ Upload Bill Screenshot:</label>
                                <div class="file-upload-container">
                                    <input type="file" id="billScreenshot" name="billScreenshot" accept="image/*" class="file-input">
                                    <div class="file-upload-display">
                                        <div id="imagePreview" class="image-preview" style="display: none;">
                                            <img id="previewImg" src="" alt="Preview">
                                            <button type="button" id="removeImage" class="remove-image-btn">‚ùå Remove</button>
                                        </div>
                                        <div id="uploadPrompt" class="upload-prompt">
                                            <span>üìÅ Pilih file gambar atau drag & drop di sini</span>
                                            <small>Format: JPG, PNG, GIF (Max: 5MB)</small>
                                            <small style="display: block; margin-top: 5px; color: #667eea;">
                                                ‚å®Ô∏è Atau tekan <strong>Ctrl+V</strong> untuk paste screenshot
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="taxRate">Tax Rate (%):</label>
                                <input type="number" id="taxRate" name="taxRate" step="0.01" value="5" min="0" max="100" required>
                            </div>
                            <div class="form-group">
                                <label for="subtotal">Subtotal:</label>
                                <input type="number" id="subtotal" name="subtotal" step="0.01" readonly>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="taxAmount">Tax Amount:</label>
                                <input type="number" id="taxAmount" name="taxAmount" step="0.01" readonly>
                            </div>
                            <div class="form-group">
                                <label for="totalInvoice">Total Invoice:</label>
                                <input type="number" id="totalInvoice" name="totalInvoice" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="billNumber">üí≥ Bill Number (Optional):</label>
                                <input type="text" id="billNumber" name="billNumber" placeholder="Masukkan nomor bill dari game...">
                                <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">
                                    Bill number bisa diedit setelah data disimpan sebelum di-copy
                            </small>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">üíæ Simpan Data</button>
                        <!-- <button type="button" id="exportBtn" class="btn btn-secondary">üì§ Export CSV</button> -->
                        <button type="button" id="clearBtn" class="btn btn-danger">üóëÔ∏è Clear Form</button>
                    </div>
                </form>
            </div>

            <div class="data-container">
                <div style="display: flex; justify-content: space-between; align-items: center">
                    <h2>üìä Data Tersimpan</h2>
                    <!-- Delete all saved data -->
                    <button id="deleteAllBtn" class="btn btn-danger" style="margin-left: auto; margin-bottom: 15px;">üóëÔ∏è Hapus Semua Data</button>
                </div>
                <div id="dataTable"></div>
            </div>

            <div class="export-container">
                <h2>üìã Export Options</h2>
                <div class="export-options">
                    <div class="export-section">
                        <h3>üìù Export Data Individual</h3>
                        <p>Untuk export data individual, gunakan tombol <strong>"üìã Copy ke Discord"</strong> pada setiap data di atas.</p>
                        <p>Format yang akan di-copy:</p>
                        <pre class="format-example">```css
Nomor           : 3
Nama Client     : William Lottin
Jenis Kendaraan : mobil

Nama Montir     : Gobi Alexander
Pengerjaan      : VEHICLE WHEELS 1, Extras
Modal           : 0
Bill Number     : BILL123456

Subtotal        : $540.00
Tax Rate        : 5.00%
Tax Amount      : $27.00
Total Invoice   : $567.00```</pre>
                    </div>
                </div>
            </div>
            <div class="footer">
                <p>¬© 2025 Motion Garage | Diaz Ardian. All rights reserved.</p>
                <p>Created by <a href="https://github.com/diazardian" target="_blank">Gobi Alexander | Diaz Ardian</a></p>
            </div>
        </div>

        <!-- for alert -->
        <div>
            <div id="alert" class="alert">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <strong>Info!</strong> Data berhasil disimpan.
            </div>
            <div id="alertError" class="alert error">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <strong>Error!</strong> Terjadi kesalahan saat menyimpan data.
            </div>
            <div id="alertExport" class="alert export">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <strong>Exported!</strong> Data berhasil diexport ke CSV.
            </div>
        </div>

        <script src="script.js"></script>
    </div>
</body>
</html>
